<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!--Favicon -->
     <link href="assets/favicon.ico" rel="icon" type="image/png" >

     <!-- Google Fonts -->
     <link href="https://fonts.googleapis.com/css?family=Kalam" rel="stylesheet">

     <!-- Fontawesome  -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/css/bootstrap.min.css">

    <title>Hi OR Low?</title>
    <style media="screen">
      body{background-color: #EDE8CE;}

      #fontK{font-family: 'Kalam', cursive;}

      #highLow{display: none;}

      /* #hiloInfo{
        background-color: rgba(118, 5, 5, 0.74)
      } */

      span.icard{
          height: 125px;
          width: 100px;
          padding: 1.75em .60em;
          padding-bottom: 2.85em;
          border: 5px solid rgba(95, 20, 20, 0.45);
          margin: 0 auto;
          text-align: center;
          font-size: 35px;
          background-color: white;
          border-radius: .25em;
          z-index: 2;
          border-style: outset;
          display: inline-block;
        }

        #cards{
          height: 600x;
          flex-wrap: wrap;
          padding-left: 6%;
        }

    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar fixed-top navbar-dark navbar-expand-sm" style="background-color:#052F5F">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#myNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <a href="index.html" class="navbar-brand"><img src="assets/cube-one-color-48-189122.png" alt=""></a>
      <div class="collapse navbar-collapse" id="myNav">
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Games</a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="hilo.html">HiLo Cards</a>
                <a class="dropdown-item" href="whack.html">Whack</a>
                <a class="dropdown-item" href="simon.html">Simon</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="workit.html">In Progress</a>
              </div>
          </li>
          <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="research.html" class="nav-link">Research</a></li>
          <li class="nav-item"><a href="connect.html" class="nav-link">Connect</a></li>

          <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
        </ul>
      </div>
      <h5 class="nav-item text-right"><a href="#" data-toggle="modal" data-target="#myMod" class="nav-link">PLAYD</a></h5>
    </nav>

  <!-- Image Carousel -->
  <div class="container">


  <div id="car" class="carousel slide" data-ride="carousel">

    <ol class="carousel-indicators">
      <li data-target="#car" data-slide-to="0" class="active"></li>
      <li data-target="#car" data-slide-to="1"></li>
      <li data-target="#car" data-slide-to="2"></li>
      <li data-target="#car" data-slide-to="3"></li>
      <!-- <li data-target="#car" data-slide-to="4"></li> -->
    </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="assets/pexels-photo (1).jpg" alt="" class="img-fluid">
            </div>

            <div class="carousel-item">
              <img src="assets/pexels-photo-127053.jpeg" alt="" class="img-fluid">
            </div>

            <div class="carousel-item">
              <img src="assets/pexels-photo-776657.jpeg" alt="" class="img-fluid">
            </div>

            <div class="carousel-item">
              <img src="assets/cube-play-colorful-eye-numbers-51361_large.jpeg" alt="" class="img-fluid">
            </div>
        </div>
  </div>
  </div>
<br>

  <!-- Intro Jumotron -->
  <div class="container">
      <div class="jumbotron shadow-lg" style="background-color:#A2C0CD">
        <!-- text-primary -->
        <div class="h1"><span class="badge badge-warning text-primary">Hi Lo Game</span></div>
        <hr class="my-5">
        <!-- rounded badge: -->
            <p class="lead"><span class="badge badge-pill" style="background-color:#052F5F">A simple frontend game</span> of guessing whether the next card dealt is higher or lower than the current card in play</p>

        <hr class="my-1">


            <button type="button" class="btn btn-warning text-primary" data-toggle="collapse" href="#hilo">Play It</button>
      </div>
  </div>
<hr class="my-5">
<div class="container collapse pb-5" id="hilo">

  <div class="row">
      <div class="col-lg-5 jumbotron bg-danger" id="hiloInfo">

            <h1 class="h1" data-toggle="tooltip" data-placement="bottom" title="Are you feeling lucky?? If you are, even though this game is not yet responsive for smaller screens, you can use some of that lucky energy by playing a game, & seeing how many times it takes you to win!"><span class="badge badge-warning text-primary">High vs Low</span></h1><br>
            <div id="messageHL" class="text-center text-light display-5"><span class="badge badge-pill" style="background-color:#052F5F"><strong>Rules:</strong></span> Select either Hi or Low for the next card.  Guess the value of the down facing card versus the up facing card.  You start with 3 lives.  Guess incorrectly 3 times and it's game over.  Score 5 points & you win!  How high can you go?</div>
            <br>

            <div id="start">
              <button id="btnstart" type="button" class="btn btn-warning text-primary mx-auto mb-2">Start Game</button>
            </div>
      </div>

            <div id="score"></div>

    <div class="col-lg-7">
        <div id="highLow" class="pt-3 pb-3 mx-auto btn-block">
          <button id="btnhigh" type="button"  class="btn btn-outline-danger btn-lg btn-block">High</button><br>
          <button id="btnlow" type="button"  class="btn btn-outline-danger btn-lg btn-block">Low</button>
        </div>


    <div id="cards" class="pb-3 mx-auto"></div>
</div>

    <div id="myMod" class="modal fade">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                  <div class="modal-header"><h3 class="modal-title">Hi Lo</h3>
                  <button type="button" class="close" data-dismiss="modal">
                  <span>x</span></button>
                  </div>
                  <div class="modal-body">
                    A simple frontend game of guessing whether the next card dealt is higher or lower than the current card in play
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Send Message</button>
                  </div>
            </div>
          </div>
    </div>

    <!-- Footer -->
    <footer class="navbar container-fluid text-light mt-3 fixed-bottom sticky-bottom" style="background-color:#052F5F">
      <button type="button" class="navbar-toggler mx-auto" data-toggle="collapse" data-target="#footer"><img src="assets/cube-one-color-32-189122.png" alt="" data-toggle="tooltip" data-placement="top" title="Check out our Privacy Policy, Terms of Use, Legal Statement, and Social Media Accounts"></button>
      <div class="collapse navbar-collapse" id="footer">

      <div class="row">
          <div class="col pt-4">
                <p class="text-center" style="color:#EDE8CE">&copy; 2018 Playd</p>
          </div>
          <div class="col pt-3">
            <div class="text-center">
              <ul class="list-inline">
                  <li class="list-inline-item text-primary"><a href="" target="_blank"><i class="fab fa-youtube-square fa-2x"></i></a></li>
                  <li class="list-inline-item"><a href="" target="_blank" style="color:#EDE8CE"><i class="fab fa-facebook-square fa-2x"></i></a></li>
                  <li class="list-inline-item text-danger"><a href="" target="_blank"><i class="fab fa-twitter-square fa-2x"></i></a></li>
                  <li class="list-inline-item"><a href="" target="_blank" style="color:#EDE8CE"><i class="fab fa-pinterest-square fa-2x"></i></a></li>
              </ul>
            </div>
          </div>
          <div class="col pt-4">
            <ul class="list-inline">
                <li class="list-inline-item text-primary"><a href="" target="_blank">Terms of Use</a></li>
                <li class="list-inline-item"><a href="" target="_blank" style="color:#EDE8CE">Privacy Policy</a></li>
                <li class="list-inline-item text-primary"><a href="" target="_blank">Legal</a></li>
            </ul>
          </div>
      </div>
      </div>
    </footer>

    <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

      <script>
      $(() => {

      $(function() {
        $('[data-toggle="tooltip"]').tooltip()
        $('[data-toggle="popover"]').popover()
      })
      //==========================================================================
      // variables:
      let cardOutput = document.getElementById('cards');
      let count = 0;
      let score = 0;
      let lives = 3;
      let cards = [];
      const suits = ['spades', 'hearts', 'clubs', 'diams'];
      const numbers = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
      const $message = $('#messageHL');
      let scoreOutput = document.getElementById('score');

      const gameStart = () => {
        const messageChange = $('#start').on('click', (e) => {
          // console.log('start button clicked');
          $("#messageHL").text("Game Started!");
          $(e.currentTarget).css('display', 'none');
          $('#highLow').css('display','inline-flex');
          })
          buildCards();
          shuffleArray(cards);
          cardOutput.innerHTML +=showCard();
        }

      let hilo = (a) => {
            //calculate winner
            let win = false;
            let oldCard = cards[count].cardValue;
            count++;
            cardOutput.innerHTML += showCard();
            $(cardOutput).html += showCard();
                  let newCard = cards[count].cardValue;
                  if(a === 'high' && oldCard < newCard) {
                    win = true;
                  } else if (a === 'low' && oldCard > newCard) {
                    win = true;
                  }
                        if(win) {
                            score++;
                            if(score == 5){
                              let cards = [];
                              winState();
                            } else if (win && score < 5){
                            $("#messageHL").text("You were correct! Score: " + score + " LIVES remaining:  "+lives);
                          }
                          } else {
                              score--;
                              lives--;
                            $("#messageHL").text("You were wrong! Your score is now " + score + ".  LIVES remaining: " +lives);

                                  if(lives == 0) {
                                    let cards = [];
                                    endPlay(score);
                                  }
                            }
      }

      const endPlay = (s) => {
          document.getElementById('highLow').style.display='none';
          document.getElementById('score');
          $('#messageHL').text("Game over!  Your score was " + s);
          $('#start').css('display','block');
          let count = 0;
          let score = 0;
          let lives = 3;
          let cards = [" "];
          gameStart();
      }

      const winState = () => {

        document.getElementById('highLow').style.display='none';
        document.getElementById('score');
        $("#messageHL").text("Congratulations!  You've reached 5 points!  You're a High-Roller now! Press Start Game to play again!");
        $('#start').css('display','block');
        cardOutput.innerHTML = "";
        let count = 0;
        let score = 0;
        let lives = 3;
        let cards = [];

        gameStart();
      }

      const shuffleArray = (array) => {
          for(let i = array.length -1; i>0; i--){
            const holder = Math.floor(Math.random()* (i + 1));
            const temp = array[i];
            array[i] = array[holder];
            array[holder] = temp;
          }
          return array;
      }

      let showCard = () => {
        let c = cards[count];
        let bgColor = (c.icon == "H" || c.icon == "D")?'red':'black';
          return '<span class="icard" style="color:'+bgColor+'">'+cards[count].num+'&'+ cards[count].suit+';</span>';
      }

      const buildCards = () => {
        cards = [];
        for(s in suits){
          const suit = suits[s][0].toUpperCase();
          for(n in numbers){
              const card = {
               suit: suits[s],
               num: numbers[n],
               cardValue: parseInt(n) + 2,
               icon: suit
            }
            cards.push(card)
          }
        }
        // console.log(cards);
      }

      // event listeners:
    $('#btnstart').on('click', (e) => {
      $("#cards").empty();
      gameStart();
    })

    $('#btnhigh').on('click', (e) => {
      hilo('high');
    })

    $('#btnlow').on('click', (e) => {
      hilo('low');
    })

});
    </script>
    </body>
  </html>
